!function n(r,o,l){function c(e,t){if(!o[e]){if(!r[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(u)return u(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var i=o[e]={exports:{}};r[e][0].call(i.exports,function(t){return c(r[e][1][t]||t)},i,i.exports,n,r,o,l)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,a){"use strict";var s=function(){function s(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,a){return e&&s(t.prototype,e),a&&s(t,a),t}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(){i(this,t),this.emptyValue=0,this.emptyData="-"}return s(t,[{key:"parseIntervalValue",value:function(t){var e="",a=1;return-1<t.search("s")&&(e="s",a=1e3),-1<t.search("m")&&(e="m",a=6e4),-1<t.search("h")&&(e="h",a=36e5),-1<t.search("d")&&(e="d",a=864e5),parseFloat(t.replace(e,""))*a}},{key:"parseNumber",value:function(t){if(!t&&0!==t)return t;if(t===this.emptyValue||t===this.emptyData)return t;if(1e5<(t=parseFloat(t))){var e=t.toFixed(0),a="K",s=e.slice(0,e.length-1);return 1e9<t?(s=e.slice(0,e.length-7),a="B"):1e6<t&&(s=e.slice(0,e.length-4),a="M"),s.slice(0,s.length-2)+"."+s.slice(s.length-2)+" "+a}if(0<t%1){var i=2;return t<1?i=8:t<10?i=6:t<1e3&&(i=4),this.roundAmount(t,i)}return t.toFixed(2)}},{key:"roundAmount",value:function(t,e,a){return t=parseFloat(t),e||(e=8),a||(a="round"),e=Math.pow(10,e),Math[a](t*e)/e}},{key:"loop",value:function(i,n,t,e){var r=this,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,l=function(t,e){try{var a=n(i[o],o,i);a&&a.then?a.then(t).catch(e):t(a)}catch(t){e(t)}},a=function(t,e){return o<i.length?new Promise(l).then((a=t,s=e,function(){return r.loop(i,n,a,s,++o)})).catch(e):t();var a,s};return t?a(t,e):new Promise(a)}},{key:"getScript",value:function(t,s,i){if(!i[s])return i[s]="pending",new Promise(function(t,e){var a=document.createElement("script");document.body.appendChild(a),a.onload=function(){return i[s]="downloaded",t},a.onerror=function(){return delete i[s],e},a.async=!0,a.src=s})}}]),t}(),r=function(){function t(){i(this,t),this.bootstrap=new n,this.states=[],this.defaults={objectName:"cpCurrencyWidgets",className:"coinpaprika-currency-widget",cssFileName:"widget.min.css",currency:"btc-bitcoin",primary_currency:"USD",modules:["chart","market_details"],update_active:!1,update_timeout:"30s",language:"en",style_src:null,img_src:null,lang_src:null,origin_src:"https://cdn.jsdelivr.net/npm/@coinpaprika/widget-currency",show_details_currency:!1,ticker:{name:void 0,symbol:void 0,price:void 0,price_change_24h:void 0,rank:void 0,price_ath:void 0,volume_24h:void 0,market_cap:void 0,percent_from_price_ath:void 0,volume_24h_change_24h:void 0,market_cap_change_24h:void 0},interval:null,isWordpress:!1,isData:!1,message:"data_loading",translations:{},mainElement:null,noTranslationLabels:[],scriptsDownloaded:{},rwd:{xs:280,s:320,m:370}}}return s(t,[{key:"init",value:function(t){if(!this.getMainElement(t))return console.error('Bind failed, no element with class = "'+this.defaults.className+'"');this.getDefaults(t),this.setOriginLink(t)}},{key:"setWidgetClass",value:function(t){for(var e=0;e<t.length;e++)for(var a=t[e].getBoundingClientRect().width,s=Object.keys(this.defaults.rwd),i=0;i<s.length;i++){var n=s[i],r=this.defaults.rwd[n],o=this.defaults.className+"__"+n;a<=r&&t[e].classList.add(o),r<a&&t[e].classList.remove(o)}}},{key:"getMainElement",value:function(t){return this.states[t]?this.states[t].mainElement:null}},{key:"getDefaults",value:function(t){var e=this.getMainElement(t);e&&e.dataset&&(e.dataset.modules&&this.updateData(t,"modules",JSON.parse(e.dataset.modules)),e.dataset.primaryCurrency&&this.updateData(t,"primary_currency",e.dataset.primaryCurrency),e.dataset.currency&&this.updateData(t,"currency",e.dataset.currency),e.dataset.showDetailsCurrency&&this.updateData(t,"show_details_currency","true"===e.dataset.showDetailsCurrency),e.dataset.updateActive&&this.updateData(t,"update_active","true"===e.dataset.updateActive),e.dataset.updateTimeout&&this.updateData(t,"update_timeout",this.bootstrap.parseIntervalValue(e.dataset.updateTimeout)),e.dataset.language&&this.updateData(t,"language",e.dataset.language),e.dataset.originSrc&&this.updateData(t,"origin_src",e.dataset.originSrc),e.dataset.nodeModulesSrc&&this.updateData(t,"node_modules_src",e.dataset.nodeModulesSrc),e.dataset.bowerSrc&&this.updateData(t,"bower_src",e.dataset.bowerSrc),e.dataset.styleSrc&&this.updateData(t,"style_src",e.dataset.styleSrc),e.dataset.langSrc&&this.updateData(t,"logo_src",e.dataset.langSrc),e.dataset.imgSrc&&this.updateData(t,"logo_src",e.dataset.imgSrc))}},{key:"setOriginLink",value:function(t){var e=this;0===Object.keys(this.defaults.translations).length&&this.getTranslations(this.defaults.language),this.stylesheet(),setTimeout(function(){e.addWidgetElement(t),e.initInterval(t)},100)}},{key:"addWidgetElement",value:function(t){var e=this.getMainElement(t);if(e){var a=this.widgetChartElement(t)+this.widgetMarketDetailsElement(t),s=this.widgetMainElement(t)+a+this.widgetFooter(t);e.innerHTML=s}this.setBeforeElementInFooter(t),this.getData(t)}},{key:"getData",value:function(t){var e=this,a=new XMLHttpRequest;a.open("GET","https://api.coinpaprika.com/v1/widget/"+this.states[t].currency+"?quote="+this.states[t].primary_currency),a.onload=function(){200===a.status?(e.states[t].isData||e.updateData(t,"isData",!0),e.updateTicker(t,JSON.parse(a.responseText))):e.onErrorRequest(t,a)},a.onerror=function(){e.onErrorRequest(t,a)},a.send()}},{key:"onErrorRequest",value:function(t,e){this.states[t].isData&&this.updateData(t,"isData",!1),this.updateData(t,"message","data_unavailable"),console.error("Request failed.  Returned status of "+e,this.states[t])}},{key:"initInterval",value:function(t){var e=this;clearInterval(this.states[t].interval),this.states[t].update_active&&1e3<this.states[t].update_timeout&&(this.states[t].interval=setInterval(function(){e.getData(t)},this.states[t].update_timeout))}},{key:"setBeforeElementInFooter",value:function(t){if(!this.states[t].isWordpress){var e=this.getMainElement(t);if(e){"style"===e.children[0].localName&&e.removeChild(e.childNodes[0]);for(var a=e.querySelector(".cp-widget__footer"),s=a.getBoundingClientRect().width-43,i=0;i<a.childNodes.length;i++)s-=a.childNodes[i].getBoundingClientRect().width;var n=document.createElement("style");n.innerHTML=".cp-widget__footer--"+t+"::before{width:"+s.toFixed(0)+"px;}",e.insertBefore(n,e.children[0])}}}},{key:"updateWidgetElement",value:function(t,e,a,s){var i=this.states[t],n=this.getMainElement(t);if(n){var r=s?"Ticker":"";if("name"===e||"currency"===e){if("currency"===e)for(var o=n.querySelectorAll(".cp-widget__footer > a"),l=0;l<o.length;l++)o[l].href=this.coin_link(a);this.getImage(t)}if("isData"===e||"message"===e)for(var c=n.querySelectorAll(".cp-widget__main"),u=0;u<c.length;u++)c[u].innerHTML=i.isData?this.widgetMainElementData(t):this.widgetMainElementMessage(t);else for(var d=n.querySelectorAll("."+e+r),h=0;h<d.length;h++){var p=d[h];if(p.classList.contains("cp-widget__rank")){var g=0<parseFloat(a)?"cp-widget__rank-up":parseFloat(a)<0?"cp-widget__rank-down":"cp-widget__rank-neutral";p.classList.remove("cp-widget__rank-down"),p.classList.remove("cp-widget__rank-up"),p.classList.remove("cp-widget__rank-neutral"),a=void 0===a?this.bootstrap.emptyData:(p.classList.add(g),"price_change_24h"===e?"("+this.bootstrap.roundAmount(a,2)+"%)":this.bootstrap.roundAmount(a,2)+"%")}p.classList.contains("showDetailsCurrency")&&!i.show_details_currency&&(a=" "),p.classList.contains("parseNumber")?p.innerText=this.bootstrap.parseNumber(a)||this.bootstrap.emptyData:p.innerText=a||this.bootstrap.emptyData}}}},{key:"updateData",value:function(t,e,a,s){s?this.states[t].ticker[e]=a:this.states[t][e]=a,"language"===e&&this.getTranslations(a),this.updateWidgetElement(t,e,a,s)}},{key:"updateWidgetTranslations",value:function(e,t){var o=this;this.defaults.translations[e]=t;for(var a=function(r){var t=0<o.states[r].noTranslationLabels.length&&"en"===e;(o.states[r].language===e||t)&&function(){for(var t=o.states[r].mainElement,n=Array.prototype.slice.call(t.querySelectorAll(".cp-translation")),e=function(i){n[i].classList.forEach(function(t){if(-1<t.search("translation_")){var e=t.replace("translation_","");"message"===e&&(e=o.states[r].message);var a=o.states[r].noTranslationLabels.indexOf(e),s=o.getTranslation(r,e);-1<a&&s&&o.states[r].noTranslationLabels.splice(a,1),n[i].innerText=s,n[i].closest(".cp-widget__footer")&&setTimeout(o.setBeforeElementInFooter.bind(null,r),50)}})},a=0;a<n.length;a++)e(a)}()},s=0;s<this.states.length;s++)a(s)}},{key:"updateTicker",value:function(t,e){for(var a=Object.keys(e),s=0;s<a.length;s++)this.updateData(t,a[s],e[a[s]],!0)}},{key:"stylesheet",value:function(){if(!1!==this.defaults.style_src){var t=this.defaults.style_src||this.defaults.origin_src+"/dist/"+this.defaults.cssFileName,e=document.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.body.querySelector('link[href="'+t+'"]')?"":document.body.appendChild(e)}}},{key:"widgetMainElement",value:function(t){var e=this.states[t];return'<div class="cp-widget__header"><div class="cp-widget__img cp-widget__img-'+e.currency+'"><img/></div><div class="cp-widget__main">'+(e.isData?this.widgetMainElementData(t):this.widgetMainElementMessage(t))+"</div></div>"}},{key:"widgetMainElementData",value:function(t){var e=this.states[t];return'<h3><a href="'+this.coin_link(e.currency)+'"><span class="nameTicker">'+(e.ticker.name||this.bootstrap.emptyData)+'</span><span class="symbolTicker">'+(e.ticker.symbol||this.bootstrap.emptyData)+'</span></a></h3><strong><span class="priceTicker parseNumber">'+(this.bootstrap.parseNumber(e.ticker.price)||this.bootstrap.emptyData)+'</span> <span class="primaryCurrency">'+e.primary_currency+' </span><span class="price_change_24hTicker cp-widget__rank cp-widget__rank-'+(0<e.ticker.price_change_24h?"up":e.ticker.price_change_24h<0?"down":"neutral")+'">('+(this.bootstrap.roundAmount(e.ticker.price_change_24h,2)||this.bootstrap.emptyValue)+'%)</span></strong><span class="cp-widget__rank-label"><span class="cp-translation translation_rank">'+this.getTranslation(t,"rank")+'</span> <span class="rankTicker">'+(e.ticker.rank||this.bootstrap.emptyData)+"</span></span>"}},{key:"widgetMainElementMessage",value:function(t){var e=this.states[t].message;return'<div class="cp-widget__main-no-data cp-translation translation_message">'+this.getTranslation(t,e)+"</div>"}},{key:"widgetMarketDetailsElement",value:function(t){return-1<this.states[t].modules.indexOf("market_details")?'<div class="cp-widget__details">'+this.widgetAthElement(t)+this.widgetVolume24hElement(t)+this.widgetMarketCapElement(t)+"</div>":""}},{key:"widgetAthElement",value:function(t){return'<div><small class="cp-translation translation_ath">'+this.getTranslation(t,"ath")+'</small><div><span class="price_athTicker parseNumber">'+this.bootstrap.emptyData+' </span><span class="symbolTicker showDetailsCurrency"></span></div><span class="percent_from_price_athTicker cp-widget__rank">'+this.bootstrap.emptyData+"</span></div>"}},{key:"widgetVolume24hElement",value:function(t){return'<div><small class="cp-translation translation_volume_24h">'+this.getTranslation(t,"volume_24h")+'</small><div><span class="volume_24hTicker parseNumber">'+this.bootstrap.emptyData+' </span><span class="symbolTicker showDetailsCurrency"></span></div><span class="volume_24h_change_24hTicker cp-widget__rank">'+this.bootstrap.emptyData+"</span></div>"}},{key:"widgetMarketCapElement",value:function(t){return'<div><small class="cp-translation translation_market_cap">'+this.getTranslation(t,"market_cap")+'</small><div><span class="market_capTicker parseNumber">'+this.bootstrap.emptyData+' </span><span class="symbolTicker showDetailsCurrency"></span></div><span class="market_cap_change_24hTicker cp-widget__rank">'+this.bootstrap.emptyData+"</span></div>"}},{key:"widgetChartElement",value:function(e){var a=this,t=Promise.resolve();return t=(t=t.then(function(){return window.Highcharts?null:a.bootstrap.getScript(e,"https://code.highcharts.com/highcharts.js",a.defaults.scriptsDownloaded)})).then(function(t){return console.log("widgetChartElement",{result:t}),-1<a.states[e].modules.indexOf("chart")?'<div class="cp-widget__chart">CHART</div>':""})}},{key:"widgetFooter",value:function(t){var e=this.states[t].currency;return this.states[t].isWordpress?"":'<p class="cp-widget__footer cp-widget__footer--'+t+'"><span class="cp-translation translation_powered_by">'+this.getTranslation(t,"powered_by")+' </span><img style="width: 16px" src="'+this.main_logo_link()+'" alt=""/><a target="_blank" href="'+this.coin_link(e)+'">coinpaprika.com</a></p>'}},{key:"getImage",value:function(t){for(var i=this,n=this.states[t],r=n.mainElement.getElementsByClassName("cp-widget__img"),e=function(t){var e=r[t];e.classList.add("cp-widget__img--hidden");var a=e.querySelector("img"),s=new Image;s.onload=function(){a.src=s.src,e.classList.remove("cp-widget__img--hidden")},s.src=i.img_src(n.currency)},a=0;a<r.length;a++)e(a)}},{key:"img_src",value:function(t){return"https://coinpaprika.com/coin/"+t+"/logo.png"}},{key:"coin_link",value:function(t){return"https://coinpaprika.com/coin/"+t}},{key:"main_logo_link",value:function(){return this.defaults.img_src||this.defaults.origin_src+"/dist/img/logo_widget.svg"}},{key:"getScriptElement",value:function(){return document.querySelector("script[data-cp-currency-widget]")}},{key:"getTranslation",value:function(t,e){var a=this.defaults.translations[this.states[t].language]?this.defaults.translations[this.states[t].language][e]:null;return!a&&this.defaults.translations.en&&(a=this.defaults.translations.en[e]),a||this.addLabelWithoutTranslation(t,e)}},{key:"addLabelWithoutTranslation",value:function(t,e){return this.defaults.translations.en||this.getTranslations("en"),this.states[t].noTranslationLabels.push(e)}},{key:"getTranslations",value:function(t){var e=this;if(!this.defaults.translations[t]){var a=new XMLHttpRequest,s=this.defaults.lang_src||this.defaults.origin_src+"/dist/lang";a.open("GET",s+"/"+t+".json"),a.onload=function(){200===a.status?e.updateWidgetTranslations(t,JSON.parse(a.responseText)):(e.onErrorRequest(0,a),e.getTranslations("en"),delete e.defaults.translations[t])},a.onerror=function(){e.onErrorRequest(0,a),e.getTranslations("en"),delete e.defaults.translations[t]},a.send(),this.defaults.translations[t]={}}}}]),t}();new(function(){function t(){i(this,t),this.widgets=new r,this.bind()}return s(t,[{key:"bind",value:function(){var t=this;window[this.widgets.defaults.objectName]={},document.addEventListener("DOMContentLoaded",function(){return t.initWidgets()},!1),window[this.widgets.defaults.objectName].bindWidget=function(){window[t.widgets.defaults.objectName].init=!1,t.initWidgets()}}},{key:"initWidgets",value:function(){var a=this;if(!window[this.widgets.defaults.objectName].init){window[this.widgets.defaults.objectName].init=!0;var s=Array.prototype.slice.call(document.getElementsByClassName(this.widgets.defaults.className));this.widgets.setWidgetClass(s),window.addEventListener("resize",function(){a.widgets.setWidgetClass(s);for(var t=0;t<s.length;t++)a.widgets.setBeforeElementInFooter(t)},!1);var t=this.widgets.getScriptElement();if(t&&t.dataset&&t.dataset.cpCurrencyWidget){var e=JSON.parse(t.dataset.cpCurrencyWidget);if(Object.keys(e))for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n].replace("-","_");this.widgets.defaults[r]=e[i[n]]}}setTimeout(function(){a.widgets.states=[];for(var t=0;t<s.length;t++){var e=JSON.parse(JSON.stringify(a.widgets.defaults));e.isWordpress=s[t].classList.contains("wordpress"),e.mainElement=s[t],a.widgets.states.push(e),a.widgets.init(t)}},50)}}}]),t}())},{}]},{},[1]);